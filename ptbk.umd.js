!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Ptbk=t()}(this,function(){"use strict";var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var a=t(function(e,t){var o=u&&u.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.Ptbk=void 0;function i(e){return function(o){return e.reduce(function(e,t,n){var r;return o[n]?Object.assign(e,((r={})[t]=o[n],r)):e},{})}}function n(e){return(e=o(e,2))[0]+e[1]}var r=function(e){var t=e.length/2;return[e.slice(0,t),e.slice(t)]},r=(a.prototype.create=function(e,t){return new a(e,t)},a.prototype.isPtbk=function(e){return!!(null!=e&&e.auth&&null!=e&&e.data&&null!=e&&e.ptbk)},a.isPtbk=function(e){return a.instance.isPtbk(e)},a.encode=function(e){return a.instance.encode(e)},a.decode=function(e){return a.instance.decode(e)},a.create=function(e,t){return a.instance.create(e,t)},a.instance=new a(n,r),a);function a(e,t,n){var r=this;void 0===n&&(n="bWFkZSBieSAxMDI5OTg1Nzk5QHFxLmNvbQ=="),this.encodePtbk=e,this.decodePtbk=t,this.auth=n,this.createPtbkMap=function(e,t){void 0===t&&(t=!1);var n=o(r.decodePtbk(e),2),e=n[0],n=n[1],e=Array.from(e),n=Array.from(n);return t?i(e)(n):i(n)(e)},this.decodeDataFromPtbk=function(e,t){var n=r.createPtbkMap(e);return Array.from(t).map(function(e){return n[e]}).join("")},this.encodeDataFromPtbk=function(e,t){var n=r.createPtbkMap(e,!0);return Array.from(t).map(function(e){return n[e]}).join("")},this.createPrivateUniqid=function(e){return Array.from(new Set(Array.from(e))).join("")},this.createPublicUniqid=function(e){for(var t=e.length,n=e,r=n.length,o=[];;){o.push(n[Math.floor(Math.random()*r)]);var i=Array.from(new Set(o));if(i.length===t)return i.join("")}},this.createPtbk=function(e){var t=r.createPrivateUniqid(e),e=r.createPublicUniqid(t);return r.encodePtbk([t,e])},this.encode=function(e){if(r.isPtbk(e))return e;var t={ptbk:null,auth:r.auth,data:null},n=encodeURI(JSON.stringify(e)),e=r.createPtbk(n);return t.ptbk=e,t.data=r.encodeDataFromPtbk(e,n),t},this.decode=function(e){if(r.isPtbk(e)){e=e;return JSON.parse(decodeURI(r.decodeDataFromPtbk(null==e?void 0:e.ptbk,null==e?void 0:e.data)))}throw new TypeError("Ptbk: data is not PtbkType!")}}t.Ptbk=r,t.default=r});e(a);a.Ptbk;return e(t(function(e,t){var r=u&&u.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=u&&u.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(a,t);var i=a;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(i).default}})}))});
